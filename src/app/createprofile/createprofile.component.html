<div class="container">
    <h1>Create profile</h1>
    <hr>
    <div>

        <form [formGroup]="exform" (ngSubmit)="addUserdata()">
            <div class="form-group">
                <label>Profile name:</label>
                <input formControlName="p_name" type="text" [(ngModel)]="users.p_name" class="form-control">
            </div>
            <div class="form-group">
                <label>Description:</label>
                <input formControlName="description" type="text" [(ngModel)]="users.description" class="form-control">
            </div>
            <div class="form-group">
                <label>status:</label>
                <input formControlName="status" type="text" [(ngModel)]="users.status" class="form-control">
            </div>


            <div class="container mt-4">
                <div class="row">
                    <div class="col-lg-12">
                        <table id="datatable" [formGroup]="form"
                            class="table table-bordered border-success text-center dt-responsive nowrap w-100 datatables">
                            <thead>
                                <tr>
                                    <th scope="col">
                                        <input class="form-check-input mx-1" type="checkbox" [checked]="checks"
                                            (change)="bulk($event)">Modules
                                    </th>
                                    <th scope="col">
                                        <input class="form-check-input mx-1" type="checkbox" value=" "
                                            id="flexCheckDefault" [checked]="checks" (change)="bulk($event)">View
                                    </th>
                                    <th scope="col">
                                        <input class="form-check-input mx-1" type="checkbox" value=""
                                            id="flexCheckDefault" [checked]="checks" [checked]="checks2"
                                            (change)="modules($event)">Create
                                    </th>
                                    <th scope="col">
                                        <input class="form-check-input mx-1" type="checkbox" value=""
                                            id="flexCheckDefault" [checked]="checks" [checked]="checks3"
                                            (change)="modulesedit($event)">Edit
                                    </th>
                                    <th scope="col">
                                        <input class="form-check-input mx-1" type="checkbox" value=""
                                            id="flexCheckDefault" [checked]="checks" [checked]="checks4"
                                            (change)="modulesdelete($event)">Delete
                                    </th>
                                    <th>Data</th>
                                </tr>
                            </thead>
                            <tbody formArrayName="passenger" *ngFor="let passengerGroup of passenger?.controls; let i = index; let l = index;">
                                <tr [formGroupName]="i">
                                <ng-container>

                                    <th scope="col">
                                        {{module_name[i]}}
                                    </th>
                                    <td>
                                        <input type="checkbox" formControlName="views" value=" {{views[i]}}" />
                                    </td>
                                    <td>
                                        <input type="checkbox" formControlName="creates" value=" {{creates[i]}}" />
                                    </td>
                                    <td>
                                        <input type="checkbox" formControlName="edits" value=" {{edits[i]}}" />
                                    </td>
                                    <td>
                                        <input type="checkbox" formControlName="deletes" value=" {{deletes[i]}}" />
                                    </td>
                                    <td>
                                        <ng-container *ngIf="rowindex == i+1; else templateb">
                                            <button type="button" *ngIf="down" (click)="toggleOn(l+1)">
                                                <i class="bi bi-chevron-down"></i></button>
                                            <button type="button" *ngIf="up" (click)="toggleOff(l)"> <i
                                                    class="bi bi-chevron-up"></i>

                                            </button>
                                        </ng-container>
                                        <ng-template  #templateb>
                                            <button type="button"(click)="toggleOn(l+1)">
                                                <i class="bi bi-chevron-down"></i>
                                            </button>
                                        </ng-template>
                                    </td>
                                </ng-container>
                                </tr>
                            
                                <tr>
                                    <!-- <td colspan="6"  *ngIf="rowindex==l+1"> 
                                        <ng-container *ngIf="'{{module_id[i]}}'==l+1">
                                            <app-fieldpermission></app-fieldpermission>
                                        </ng-container>
                                    </td> -->
                                    <td colspan="6" *ngIf="rowindex==l+1">
                                        <!-- <ng-container *ngIf="rowid==1"> -->
                        
                                            <app-fieldpermission > </app-fieldpermission>
                                        <!-- </ng-container> -->
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="d-grid justify-content-center">
                            <button class="mb-3" type="submit">Save</button>
                            <button routerLink="/users">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>